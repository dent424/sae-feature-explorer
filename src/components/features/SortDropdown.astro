---
import { SORT_OPTIONS, type SortOption } from '../../lib/data';

interface Props {
  currentSort: SortOption;
  basePath?: string;
}

const { currentSort, basePath = '/features' } = Astro.props;

function getSortUrl(sort: SortOption): string {
  if (sort === 'rank-ctrl') {
    return basePath;
  }
  return `${basePath}/sort/${sort}`;
}
---

<div class="flex items-center space-x-2">
  <label for="sort-select" class="text-sm text-gray-600">Sort by:</label>
  <select
    id="sort-select"
    class="block w-48 px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
    onchange="window.location.href = this.value"
  >
    {SORT_OPTIONS.map((option) => (
      <option
        value={getSortUrl(option.value)}
        selected={option.value === currentSort}
      >
        {option.label}
      </option>
    ))}
  </select>
</div>
