---
import { formatToken } from '../../lib/data';

interface TokenData {
  token: string;
  count: number;
  mean_activation: number;
}

interface Props {
  tokens: TokenData[];
}

const { tokens } = Astro.props;
---

<div class="overflow-x-auto">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          Token
        </th>
        <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
          Count
        </th>
        <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
          Mean Activation
        </th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      {tokens.slice(0, 20).map((t) => {
        const { display, isSpecial } = formatToken(t.token);
        return (
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-2 whitespace-nowrap">
              {isSpecial ? (
                <span class="inline-block bg-gray-200 text-gray-700 px-2 py-0.5 rounded text-sm font-mono">
                  {display}
                </span>
              ) : (
                <span class="font-mono text-sm">{display}</span>
              )}
            </td>
            <td class="px-4 py-2 whitespace-nowrap text-right text-sm text-gray-600">
              {t.count.toLocaleString()}
            </td>
            <td class="px-4 py-2 whitespace-nowrap text-right text-sm text-gray-600">
              {t.mean_activation.toFixed(4)}
            </td>
          </tr>
        );
      })}
    </tbody>
  </table>
</div>
